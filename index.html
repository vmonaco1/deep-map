<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb18030">
<title>A Deep Map by Victoria</title>
<meta name="description" content="VMon Deep Map">
<meta name="keywords" content="Victoria Monaco, Molloy College">
<meta name='viewport' content='initial-scale=1,maximum-scale=1' />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.js"></script>
<script src='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.js'></script>
<link href='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.css' rel='stylesheet' />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-zoomslider/v0.7.0/L.Control.Zoomslider.css' rel='stylesheet' />
<style>

body, html {
  margin:0;
  padding:0;
  height: 100%;
  overflow: hidden;
}

<!--THIS DISABLES THE SCROLL FUNCTION -->

html {
  overflow-y: scroll !important; 
}

<!--END SCROLLBAR BLOCK -->

<!--CSS FOR MAP -->

#map-container {
            height: 70%;
            padding-bottom: 0px;
            margin: 0px;
}

#map {
        display: block;
        height: 100%;
        width: 100%;
        margin-left: auto;
        margin-right: auto;
}

.popup {
  text-align:center;
}

.popup .slideshow .image{
  display:none;
}

.popup .slideshow .image.active {
  display:block;
}

.popup .slideshow img {
  width:100%;
}

.popup .slideshow .caption {
  background:#eee;
  padding:10px;
}

.popup .cycle {
  padding:10px 0 20px;
}

.popup .cycle a.prev { float:left;
}

.popup .cycle a.next { float:right;
}

/* Adjustments to account for mapbox.css box-sizing rules */
.leaflet-control-zoomslider-knob { width:14px; height:6px; }
.leaflet-container .leaflet-control-zoomslider-body {
  -webkit-box-sizing:content-box;
     -moz-box-sizing:content-box;
          box-sizing:content-box;
  }

<!--End CSS for Map -->

</style>
</head>

<body>

<div id='map'></div>
<div id="map-container">

<div id='map'></div>
</div>


<!-- API ACCESS FOR THE MAP -->
<script src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoibWFwcGxlZ2EiLCJhIjoiY2lqbzk3aGVlMDB0bHRvbTVvNXB1azZxdyJ9.PpTLv2su5er4AqXhF-LK4A';
var map = L.mapbox.map('map', 'mapbox.streets', {
  container: 'map',
});

var myLayer = L.mapbox.featureLayer().addTo(map);

var geoJson = [{
    type: 'Feature',
    "geometry": { "type": "Point", "coordinates": [-73.77922296524048, 40.79648703979603]},
    "properties": {
        'title': 'Fort',
        'marker-color': '#00f900',
        'marker-symbol': 'airfield',
        'marker-size': 'medium',
        'images': [
          ['https://live.staticflickr.com/3479/3941175459_d3bb56890d_b.jpg','The initial design for the fort was drawn up by Robert E. Lee and was later modified by the fort’s namesake, Chief Engineer Joseph G. Totten.'],
          ['https://untappedcities.com/wp-content/uploads/2019/06/featured-fort-totten-fortified-aaron-asis-NYC-untapped-cities1.jpg','Unfortunately construction was abandoned after the war.'],
          ['https://www.nycgovparks.org/photo_gallery/full_size/18063.jpg','Today, Fort Totten is an Army Reserve Base and much of it has become a New York City public park- Little Bay Park. It was once known as Willets Point after the family that purchased this peninsula in 1829.'],
          ['https://untappedcities.com/wp-content/uploads/2019/05/fort-totten-NYC-untapped-cities2.jpg','It was acquired by the army in 1857 with the purpose of protecting the city’s waterways from a foreign invasion.'],
          ['https://www.nycgovparks.org/photo_gallery/full_size/18062.jpg','The fort was built during the Civil War era to defend the East River approach to the New York Harbor']
        ]
    }
}, {
    type: 'Feature',
    "geometry": { "type": "Point", "coordinates": [-73.77936512231827, 40.79500676953569]},
    "properties": {
        'title': 'Prison',
        'marker-color': '#ff2600',
        'marker-symbol': 'prison',
        'marker-size': 'medium',
        'images': [
          ['https://live.staticflickr.com/157/415256305_f6f00121a1_b.jpg','The Endicotts: Batteries at Fort Totten, built in 1885-1903, once featured rear-loaded disappearing guns'],
          ['https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTHgaMPf71j8TLLMWMtx_s4dj-UKcSHZuxMcQ&usqp=CAU','Now the batteries are guarded by a chain link fence, and are closed off to the public'],
          ['https://lh3.googleusercontent.com/proxy/5uAoYUVR0xZKs6c1ciJd5LpBfuJusvrMjGi-X26zik3ngUPg8Agj0JXGfm_k6ig7gcl4rczZTdl1rjr5XYXtKE_X90GJ9-iNtGZ2pwY3-0YDDklVuWUr-5oKq6XClWgdtfx6tA7c2QZu78u-sbsuIEsa4ws_MebCAU1rlfHDqP3hfDJo9eQHtO57DjErs4Y','A maze of tunnels lurks behind the façade'],
          ['https://thesensationcollective.files.wordpress.com/2011/09/img_6222.jpg?w=1040','Behind fortress walls, nine magazines, built between 1873 and 1876, housed shelves of mine torpedoes']
        ]
    }
}, {
    type: 'Feature',
    "geometry": { "type": "Point", "coordinates": [-73.77447545528412, 40.79339244541428]},
    "properties": {
        'title': 'Gazebo',
        'marker-color': '#ff9300',
        'marker-symbol': 'campsite',
        'marker-size': 'medium',
        'images': [
          ['https://live.staticflickr.com/157/415256305_f6f00121a1_b.jpg'],
          ['http://molloymediaarchaeology.org/images/jervis.jpg','<iframe width="280" height="195" src="https://www.youtube.com/embed/O31ciXE9tns" frameborder="0" allowfullscreen></iframe>','Students documented what they saw and experienced.']
        ]
    }
}, {
  type: 'Feature',
    "geometry": { "type": "Point", "coordinates": [-73.77482414245604, 40.794651418538606]},
    "properties": {
        'title': 'Bench',
        'marker-color': '#00fdff',
        'marker-symbol': 'water',
        'marker-size': 'medium',
        'images': [
          ['https://live.staticflickr.com/157/415256305_f6f00121a1_b.jpg'],
          ['http://molloymediaarchaeology.org/images/jervis.jpg','<iframe width="280" height="195" src="https://www.youtube.com/embed/O31ciXE9tns" frameborder="0" allowfullscreen></iframe>','Students documented what they saw and experienced.']
        ]
    }
}, {
  type: 'Feature',
    "geometry": { "type": "Point", "coordinates": [-73.78254890441895, 40.79138616148864]},
    "properties": {
        'title': 'Pier',
        'marker-color': '#fffb00',
        'marker-symbol': 'ferry',
        'marker-size': 'medium',
        'images': [
          ['https://live.staticflickr.com/3007/2660685770_0c3896985e_c.jpg','The rocks on the pier or jetty are huge and some of them are spread apart so you can jump from rock to rock like an obstacle course.']
          ['https://fastly.4sqi.net/img/general/600x600/387_9aPbraE4OhG77WbDI9BSjt6J2Y0X5SXRYsCNH-Ve0J4.jpg','Anyone can walk along the rocks for an amazing view of the water and the Throgs Neck Bridge. Day or night a beautiful view is guarenteed.']
        ]
    }
}, {
      type: 'Feature',
      "geometry": { "type": "Point", "coordinates": [-73.7778577208519, 40.79567482426105]},
      "properties": {
        'title': 'Tunnel',
        'marker-color': '#942192',
        'marker-symbol': 'roadblock',
        'marker-size': 'medium',
        'images': [
      ['https://live.staticflickr.com/7665/17183935305_24f5ce060a_b.jpg'],
      ['https://i.pinimg.com/originals/0d/8a/35/0d8a3577715b362b4540f5801cfdf186.jpg'],
      ['https://i0.wp.com/farm8.staticflickr.com/7252/7420391706_2800246758_b.jpg']
      ]
    }
}, {
}];

// Add custom popup html to each marker.
myLayer.on('layeradd', function(e) {
    var marker = e.layer;
    var feature = marker.feature;
    var images = feature.properties.images
    var slideshowContent = '';

    for(var i = 0; i < images.length; i++) {
        var img = images[i];

        slideshowContent += '<div class="image' + (i === 0 ? ' active' : '') + '">' +
                              '<img src="' + img[0] + '" />' +
                              '<div class="caption">' + img[1] + '</div>' +
                            '</div>';
    }

    // Create custom popup content
    var popupContent =  '<div id="' + feature.properties.id + '" class="popup">' +
                            '<h2>' + feature.properties.title + '</h2>' +
                            '<div class="slideshow">' +
                                slideshowContent +
                            '</div>' +
                            '<div class="cycle">' +
                                '<a href="#" class="prev">&laquo; Previous</a>' +
                                '<a href="#" class="next">Next &raquo;</a>' +
                            '</div>'
                        '</div>';

    // http://leafletjs.com/reference.html#popup
    marker.bindPopup(popupContent,{
        closeButton: false,
        minWidth: 320
    });
});

// Add features to the map
myLayer.setGeoJSON(geoJson);

$('#map').on('click', '.popup .cycle a', function() {
    var $slideshow = $('.slideshow'),
        $newSlide;

    if ($(this).hasClass('prev')) {
        $newSlide = $slideshow.find('.active').prev();
        if ($newSlide.index() < 0) {
            $newSlide = $('.image').last();
        }
    } else {
        $newSlide = $slideshow.find('.active').next();
        if ($newSlide.index() < 0) {
            $newSlide = $('.image').first();
        }
    }

    $slideshow.find('.active').removeClass('active').hide();
    $newSlide.addClass('active').show();
    return false;
});

<!-- SET THE MAP VIEW HERE -->
map.setView([40.4, -73], 8);
</script>


</body>
</html>
